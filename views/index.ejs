<!DOCTYPE html>
<!-- This code is for the login page -->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Login page">
    <title>Tasks</title>

    <link rel="stylesheet" href="/style.css" type="text/css">

</head>

<body class="mainbody">
    <div class="header">
        <h1>Hi <%= name %> here are your tasks:</h1>
        <form action="/logout?_method=DELETE" method="POST">
            <button type="submit">Logout</button>
        </form>
    </div>
    <div class="form-container-main">
        <h2>Create your tasks:</h2>

        <form action="/tasks" method="POST" class="form">
            <div class="form-group-container"> <!-- This should match your CSS -->
                <div class="form-group-main">
                    <label for="task">Task Name:</label>
                    <input type="text" id="task" name="task" placeholder="Please enter your task" required
                        autocomplete="off">
                </div>
                <div class="form-group-main">
                    <label for="startdate">Start Date:</label>
                    <input type="date" id="startdate" name="startdate" required>
                </div>
                <div class="form-group-main">
                    <label for="duedate">Due Date:</label>
                    <input type="date" id="duedate" name="duedate" required>
                </div>
            </div>
            <button type="submit" class="submit-btn">Add Task</button>
        </form>
    </div>

    <div>
        <h2>Tasks:</h2>
    </div>

    <table>
        <tr>
            <th>Task</th>
            <th>Start Date</th>
            <th>Due Date</th>
            <th>Available Days</th>
            <th>Days Left</th>
            <!-- <th>Delete</th> -->
        </tr>

        <% if(details!=null) { %>

            <% details.forEach(function(item){ %>
                <tr>
                    <td>
                        <%= item.task %>
                    </td>
                    <td>
                        <%= new Date(item.startdate).toLocaleDateString() %>
                    </td>
                    <td>
                        <%= new Date(item.duedate).toLocaleDateString() %>
                    </td>
                    <td>
                        <%= item.daysAvailable %>
                    </td>
                    <td>
                        <%= item.daysLeft %>
                    </td>
                    <!-- <td><%= item.time%></td> -->

                </tr>
                <% }) %>

                    <% } %>
    </table>


</body>

</html>